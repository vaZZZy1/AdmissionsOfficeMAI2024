# Проект автоматического анализа мнений абитуриентов МАИ

## Оглавление

1. [Описание проекта](#описание-проекта)
2. [Команда](#команда)
3. [Архитектура приложения](#архитектура-приложения)
    - [Компонент 1: Парсер](#компонент-1-парсер)
    - [Компонент 2: Обработчик](#компонент-2-обработчик)
    - [Компонент 3: ML часть](#компонент-3-ml-часть)
    - [Компонент 4: Фронтенд](#компонент-4-фронтенд)
4. [Инструкции по развертыванию](#инструкции-по-развертыванию)
    - [Требования](#требования)
    - [Шаги развертывания](#шаги-развертывания)
5. [Заключение](#заключение)

## Описание проекта

Наше приложение помогает приемной комиссии тем, что собирает все вопросы, жалобы, предложения абитуриентов в одном месте в удобной форме. В итоге вся информация не просто копится, но еще и автоматически анализируется и выводится на красивую доску с графиками и диаграммами.

Основные возможности приложения:
- Топ частозадаваемых вопросов.
- Топ обсуждаемых тем в чатах между абитуриентами.
- Самые негативные комментарии.
- Сообщения, где абитуриенты сравнивают МАИ и другие ВУЗы.
- Корреляция между уровнем счастья и количеством набранных баллов.

Приложение использует нейросети для анализа текста и определения различных параметров на основе сообщений абитуриентов.

## Команда

Над проектом работает команда Undefined Behavior в рамках дополнительной профессиональной переподготовки по направлению "Цифровое моделирование и суперкомпьютерные технологии" от цифровой кафедры. Команда собрана из студентов 8 института 3 курса:

1. **Тихонов Евгений Павлович**  
   **Роль**: Team Lead  
   **Задачи**: Организация рабочего процесса команды, создание паспорта проекта, координация работы Backend, Frontend и ML разработчиков, создание презентации для отчета, реализация получения JSON из MongoDB и добавление атрибутов для анализа настроений абитуриентов. 

2. **Копылов Михаил Юрьевич**  
   **Роль**: ML разработчик  
   **Задачи**: Разработка ML компонента проекта, тестирование его работоспособности.

3. **Рокотянский Александр Евгеньевич**  
   **Роль**: Frontend разработчик  
   **Задачи**: Настройка Yandex Datalens, создание дизайна дашборда, написание запросов для PostgreSQL, тестирование интерфейса.

4. **Трофимов Владислав Олегович**  
   **Роль**: Backend разработчик  
   **Задачи**: Написание парсера для Telegram, тестирование его работоспособности.

5. **Карнаков Никита Дмитриевич**  
   **Роль**: Главный технический писатель  
   **Задачи**: Руководство командой из 4 человек, организация работы команды технических писателей, написание ключевых разделов диплома, соблюдение ГОСТов.

6. **Рудаков Никита Алексеевич**  
   **Роль**: Backend разработчик  
   **Задачи**: Создание контракта между Backend и ML, написание класса абстрактного парсера.

7. **Амурский Василий Андреевич**  
   **Роль**: Главный Backend разработчик, DevOps, архитектор  
   **Задачи**: Разработка архитектуры проекта, создание и настройка кластеров MongoDB и PostgreSQL, деплой сервисов, координация работы Backend разработчиков.

8. **Кирилин Иван Олегович**  
   **Роль**: Технический писатель  
   **Задачи**: Написание разделов "Модель", "Данные", "Тестирование" для текста диплома.

9. **Шляхтина Илона Игоревна**  
   **Роль**: Product Manager, технический писатель  
   **Задачи**: Исследование рынка аналогичных сервисов, выявление плюсов и минусов, сравнение с нашим сервисом, написание раздела "Теория" для текста диплома.

10. **Беспалов Вячеслав Алексеевич**  
    **Роль**: Технический писатель  
    **Задачи**: Написание раздела "Теория" для текста диплома.

11. **Чистяков Константин Сергеевич**  
    **Роль**: Технический писатель  
    **Задачи**: Написание разделов "Введение", "Обзор", "Работа команды", "Использование" для текста диплома.

## Архитектура приложения

### Компонент 1: Парсер

**Базовый класс парсера**
- Сбор данных из определенного источника.
- Преобразование данных в JSON-формат.
- Сохранение данных в базу данных MongoDB.

**Наследники парсера**
- Получение данных из конкретного источника.
- Преобразование данных в унифицированный формат JSON.
- Сохранение данных в MongoDB.

### Компонент 2: Обработчик

**Конфигурация**
- Конфигурации хранятся в файле `.ini` и обрабатываются с помощью библиотеки `configparser`.
- Получение последней даты документов из конфигурационного файла.
- Загрузка документов из MongoDB по указанной дате.
- Получение требуемых атрибутов из конфигурации.
- Определение настроений абитуриентов по атрибутам.
- Маппинг данных с базой данных открытых источников.

**Сохранение данных**
- Проанализированные данные сохраняются в базу данных PostgreSQL.

### Компонент 3: ML часть

**Библиотеки:** `openai`, `dotenv`, `pandas`, `torch`, `transformers`

**Функции:**
- `request_to_GPT`: Функция для отправки запроса к API GPT-3.5.
- `text_analysis_gpt`: Функция для анализа множества данных.
- `compare_texts`: Функция сравнения двух текстов на совпадающий смысл.
- `paraphrase_detector`: Функция для нахождения парафраз в колонке `pd.DataFrame`.
- `replacing_similar_phrases`: Функция замены похожих фраз в текстовых данных.
- `replacing_nulls`: Функция для замены нулевых/пустых значений.
- `best_replaced`: Рекурсивная функция для нахождения лучшей замены фразы.

### Компонент 4: Фронтенд

**Используемый инструмент:** Yandex DataLens

**Функции:**
- Автоматическая загрузка данных из базы данных PostgreSQL.
- Отображение данных в виде графиков, схем и других визуальных элементов.

## Инструкции по развертыванию

### Требования

- MongoDB
- PostgreSQL
- Yandex DataLens
- Python библиотеки: `openai`, `dotenv`, `pandas`, `torch`, `transformers`

### Шаги развертывания

**Шаг 1: Установите Docker и Docker Compose**

Обновление пакетов и установка Docker:

```bash
sudo apt-get update
sudo apt-get install -y docker.io
```

Установка Docker Compose:

```bash
sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose
```

**Шаг 2: Подготовка структуры проекта и файлов**

Убедитесь, что структура вашего проекта соответствует следующей:

```
AdmissionsOfficeMAI2024/
│
├── db/
│   └── schemas/
│       ├── .sql files
│
├── docs/
├── ml/
│   ├── ml_pipeline.py
│   ├── system_prompt.txt
│
├── parser/
│   ├── __init__.py
│   ├── baseclass.py
│   ├── main.py
│   ├── save_to_monga.py
│   ├── tg.py
│   ├── tg_settings.env
│   └── Dockerfile
│
├── .env
├── keys.env
├── main_settings.env
├── main.py
├── requirements.txt
├── Dockerfile
├── Dockerfile-cron
├── docker-compose.yaml
├── logs/
│
├── run_main.sh
├── run_parser.sh
```

**Шаг 3: Проверка содержимого Docker и Cron файлов**

Убедитесь, что файлы `Dockerfile`, `Dockerfile-cron`, `run_main.sh`, `run_parser.sh` и `docker-compose.yaml` присутствуют и корректно настроены в соответствии с требованиями вашего проекта.

**Шаг 4: Запуск Docker Compose**

Перейдите в корневой каталог вашего проекта и выполните команду:

```bash
cd AdmissionsOfficeMAI2024
docker-compose up --build
```

## Заключение

Этот проект предоставляет мощный инструмент для анализа и визуализации сообщений абитуриентов, что помогает в принятии обоснованных решений и улучшении коммуникации с потенциальными студентами. Документация предоставлена для упрощения понимания структуры и процесса разработки проекта. В случае необходимости дополнения информации, оставьте комментарии в соответствующих местах.
